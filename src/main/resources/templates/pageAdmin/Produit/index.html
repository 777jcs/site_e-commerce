<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Liste des Produits</title>

    <!-- Chargement de Bootstrap pour avoir une mise en page pr√™te √† l'emploi -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="p-4">

<!-- ============================================================
     TITRE DE LA PAGE
     ============================================================ -->
<h1 class="mb-4">üì¶ Gestion des Produits</h1>

<!--
    Petit texte explicatif pour pr√©ciser √† l'administrateur
    ce qu‚Äôil voit sur cette page.
-->
<p class="lead">
    Retrouvez ici la liste compl√®te des produits disponibles dans la boutique.
    Vous pouvez cr√©er, modifier ou supprimer un produit.
</p>


<!-- ============================================================
     BOUTON D'AJOUT
     ============================================================
     Ce bouton m√®ne √† une autre page : produit/create.html
     Ce sera la page o√π l‚Äôadministrateur cr√©e un nouveau produit.
-->
<a href="/admin/produit/create" class="btn btn-success mb-3">‚ûï Ajouter un produit</a>


<!-- ============================================================
    TABLEAU DES PRODUITS
    ============================================================
    Le tableau affiche tous les produits envoy√©s par ton contr√¥leur :

        model.addAttribute("produits", produitDAO.findAll())

    La variable Thymeleaf "produits" repr√©sente une liste de Produit.
-->
<table class="table table-striped table-hover">
    <thead class="table-dark">
    <tr>
        <th>ID</th>              <!-- Identifiant du produit -->
        <th>Nom</th>             <!-- Nom du produit -->
        <th>Prix</th>            <!-- Prix du produit -->
        <th>Stock</th>           <!-- Stock disponible -->
        <th>Cat√©gorie</th>       <!-- Cat√©gorie li√©e -->
        <th>Actions</th>         <!-- Boutons modifier/supprimer -->
    </tr>
    </thead>

    <tbody>

    <!-- ============================================================== -->
    <!-- Thymeleaf : boucle sur la liste des produits -->
    <!--
        th:each = "p : ${produits}"
        ----------------------------------------
        Pour chaque √©l√©ment de la liste "produits",
        Thymeleaf cr√©e une variable p (pour produit).
    -->
    <tr th:each="p : ${produits}">

        <!-- Affichage de l‚ÄôID -->
        <td th:text="${p.id}"></td>

        <!-- Affichage du nom -->
        <td th:text="${p.nom}"></td>

        <!-- Affichage du prix -->
        <td th:text="${p.prix} + ' ‚Ç¨'"></td>

        <!-- Stock -->
        <td th:text="${p.stock}"></td>

        <!-- Cat√©gorie : on va chercher le nom de la cat√©gorie li√©e -->
        <td th:text="${p.categorie.nom}"></td>

        <!-- Enfin, les actions possibles -->
        <td>

            <!-- Bouton pour modifier le produit -->
            <a th:href="@{'/admin/produit/edit/' + ${p.id}}"
               class="btn btn-primary btn-sm">
                ‚úè Modifier
            </a>

            <!-- Bouton pour supprimer le produit -->
            <a th:href="@{'/admin/produit/delete/' + ${p.id}}"
               class="btn btn-danger btn-sm"
               onclick="return confirm('Voulez-vous vraiment supprimer ce produit ?');">
                üóë Supprimer
            </a>

        </td>
    </tr>

    </tbody>
</table>

</body>
</html>
