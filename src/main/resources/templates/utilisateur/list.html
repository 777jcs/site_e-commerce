<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">

    <!--
        Titre de la page : affichÃ© dans l'onglet du navigateur
    -->
    <title>Back Office - Liste des utilisateurs</title>

    <!--
        Import de Bootstrap (CDN)
        Bootstrap permet d'avoir un style propre sans Ã©crire beaucoup de CSS.
        C'est facultatif mais trÃ¨s conseillÃ© pour un Back Office.
    -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>


<body class="p-4">

<!--
    TITRE DE LA PAGE
    Le "h1" est simplement un titre principal.
-->
<h1 class="mb-4">Gestion des utilisateurs</h1>


<!--
    BOUTON : CrÃ©er un nouvel utilisateur

    - Le lien pointe vers /admin/utilisateurs/create
    - C'est l'URL configurÃ©e dans ton controller AdminUtilisateurController
    - Quand on clique dessus, on arrive sur le formulaire de crÃ©ation

    class="btn btn-primary" est une classe Bootstrap
    -> bouton bleu
-->
<a href="/admin/utilisateurs/create" class="btn btn-primary mb-3">
    â• Ajouter un utilisateur
</a>



<!--
    TABLEAU Bootstrap

    Ce tableau va afficher tous les utilisateurs prÃ©sents en base.
    La donnÃ©e affichÃ©e vient du controller :

    Dans AdminUtilisateurController :

        model.addAttribute("utilisateurs", utilisateurDAO.findAll())

    Donc "${utilisateurs}" est la LISTE envoyÃ©e par le controller vers la vue.
-->
<table class="table table-striped table-bordered">

    <!-- En-tÃªte du tableau -->
    <thead>
    <tr>
        <th>ID</th>
        <th>Nom</th>
        <th>Email</th>
        <th>RÃ´le</th>
        <th>Actions</th> <!-- colonne pour boutons "Modifier" / "Supprimer" -->
    </tr>
    </thead>


    <!-- Corps du tableau avec les donnÃ©es -->
    <tbody>

    <!--
        BOUCLE THYMELEAF :

        th:each = "u : ${utilisateurs}"

        â†’ Pour chaque objet "Utilisateur" dans la liste "utilisateurs",
          Thymeleaf va crÃ©er une ligne <tr>.

        "u" devient une variable reprÃ©sentant UN utilisateur.
     -->
    <tr th:each="u : ${utilisateurs}">

        <!--
            th:text="..." permet d'afficher du texte venant de l'objet
            Ici : u.idUtilisateur, u.nom, etc.
        -->

        <td th:text="${u.idUtilisateur}">1</td>
        <td th:text="${u.nom}">Nom</td>
        <td th:text="${u.email}">email@example.com</td>
        <td th:text="${u.role}">CLIENT</td>


        <td>
            <!--
                BOUTON MODIFIER

                th:href construit dynamiquement lâ€™URL :
                /admin/utilisateurs/edit/{id}

                Exemple : si id=4 â†’ /admin/utilisateurs/edit/4
            -->
            <a th:href="@{'/admin/utilisateurs/edit/' + ${u.idUtilisateur}}"
               class="btn btn-warning btn-sm">
                âœ Modifier
            </a>

            <!--
                BOUTON SUPPRIMER

                - On gÃ©nÃ¨re une URL : /admin/utilisateurs/delete/{id}
                - confirm() affiche un message "ÃŠtes-vous sÃ»r ?"
            -->
            <a th:href="@{'/admin/utilisateurs/delete/' + ${u.idUtilisateur}}"
               class="btn btn-danger btn-sm"
               onclick="return confirm('Voulez-vous vraiment supprimer cet utilisateur ?');">
                ğŸ—‘ Supprimer
            </a>
        </td>

    </tr>

    </tbody>
</table>

</body>
</html>
